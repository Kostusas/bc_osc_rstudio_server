# Batch Connect app configuration file
#
# @note Used to define the submitted cluster, title, description, and
#   hard-coded/user-defined attributes that make up this Batch Connect app.
---

# **MUST** set cluster id here that matches cluster configuration file located
# under /etc/ood/config/clusters.d/*.yml
# @example Use the Owens cluster at Ohio Supercomputer Center
#     cluster: "owens"
cluster: "ada"

# Define attribute values that aren't meant to be modified by the user within
# the Dashboard form
attributes:
  # Set the corresponding modules that need to be loaded for Jupyter to run
  #
  # Any extra command line arguments to feed to the `jupyter notebook ...`
  # command that launches the Jupyter notebook within the batch job
  #extra_jupyter_args: ""

  # add custom binds
  binds:
    label: "Extra bind mounts (-B)"
    help: "Comma-separated, e.g. /scratch:/scratch"
    value: ""

  # num of cpus
  num_cpus:
    widget: number_field
    label: "CPU cores"
    value: 2
    min: 1
    max: 24

  # Image picker
  image:
    widget: "path_selector"
    label: "Apptainer image (.sif)"
    directory: "/ada-software/containers/ondemand/rstudio"
    show_hidden: false
    show_files: true
    favorites:
      - /ada-software/containers/ondemand/rstudio
    display: true            # show on the session card
    cacheable: true          # remember last used (default);

# All of the attributes that make up the Dashboard form (in respective order),
# and made available to the submit configuration file and the template ERB
# files
#
# @note You typically do not need to modify this unless you want to add a new
#   configurable value
# @note If an attribute listed below is hard-coded above in the `attributes`
#   option, then it will not appear in the form page that the user sees in the
#   Dashboard
form:
  - image
  - binds
  - bc_queue
  - bc_num_hours
  - num_cpus
